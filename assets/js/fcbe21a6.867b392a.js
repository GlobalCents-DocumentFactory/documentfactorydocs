"use strict";(self.webpackChunkdocumentfactorydocs=self.webpackChunkdocumentfactorydocs||[]).push([[8363],{6140:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>c,toc:()=>d});var i=t(4848),s=t(8453),a=t(530);const o={sidebar_position:1,title:"Nats"},r="NATS",c={id:"external-\u0441omponents/nats",title:"Nats",description:"NATS is a high-performance, lightweight, and open-source messaging system that DocumentFactory uses for",source:"@site/docs/external-\u0441omponents/nats.mdx",sourceDirName:"external-\u0441omponents",slug:"/external-\u0441omponents/nats",permalink:"/documentfactorydocs/docs/external-\u0441omponents/nats",draft:!1,unlisted:!1,editUrl:"https://github.com/GlobalCents-DocumentFactory/documentfactorydocs/tree/main/docs/external-\u0441omponents/nats.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Nats"},sidebar:"tutorialSidebar",previous:{title:"External Components",permalink:"/documentfactorydocs/docs/category/external-components"},next:{title:"MinIO",permalink:"/documentfactorydocs/docs/external-\u0441omponents/minio"}},l={},d=[{value:"Role in DocumentFactory",id:"role-in-documentfactory",level:2},{value:"Installation and Runtime",id:"installation-and-runtime",level:2},{value:"NATS Keys",id:"nats-keys",level:2},{value:"Key Generation",id:"key-generation",level:3},{value:"Usage in dfclient.env",id:"usage-in-dfclientenv",level:3},{value:"Registering the Key in the NATS Server Config",id:"registering-the-key-in-the-nats-server-config",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"nats",children:"NATS"})}),"\n",(0,i.jsx)(n.p,{children:"NATS is a high-performance, lightweight, and open-source messaging system that DocumentFactory uses for\ninter-process communication, coordination, and message persistence. It acts as the backbone for message-based\ncommunication between the client applications and the core DocumentFactory services."}),"\n",(0,i.jsx)(n.h2,{id:"role-in-documentfactory",children:"Role in DocumentFactory"}),"\n",(0,i.jsx)(n.p,{children:"By default, NATS is used as the primary message store and transport layer. It enables real-time communication and\nevent-driven workflows across multiple clients and services. This includes:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Document submission from client applications to the processing pipeline."}),"\n",(0,i.jsx)(n.li,{children:"Status monitoring and event tracking."}),"\n",(0,i.jsx)(n.li,{children:"Queuing and buffering messages for processing."}),"\n",(0,i.jsx)(n.li,{children:"Distributing workloads across multiple processing nodes."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"installation-and-runtime",children:"Installation and Runtime"}),"\n",(0,i.jsxs)(n.p,{children:["NATS is installed automatically with DocumentFactory and does not require separate setup. The nats-server executable\nis extracted into the directory specified during the ",(0,i.jsx)(n.strong,{children:"Select the Installation Location"})," step of the DocumentFactory\n",(0,i.jsx)(n.a,{href:"../getting-started/setup#installation-overview",children:(0,i.jsx)(n.strong,{children:"installation process"})}),"."]}),"\n",(0,i.jsx)(a.A,{src:"external/external_win_nats-server.png",alt:"Installation Data Location",maxWidth:"600px"}),"\n",(0,i.jsx)(n.p,{children:"The NATS server is launched automatically when DocumentFactory starts, making the messaging infrastructure immediately available."}),"\n",(0,i.jsxs)(n.p,{children:["For more information about NATS and its capabilities, visit the ",(0,i.jsx)(n.a,{href:"https://nats.io",children:(0,i.jsx)(n.strong,{children:"official NATS documentation"})}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"nats-keys",children:"NATS Keys"}),"\n",(0,i.jsx)(n.p,{children:"To securely connect DocumentFactory and client applications with the NATS server, a pair of cryptographic keys must be generated:\na public key and a private key. These keys are used for signing and verifying communication between clients and the NATS server."}),"\n",(0,i.jsx)(n.h3,{id:"key-generation",children:"Key Generation"}),"\n",(0,i.jsxs)(n.p,{children:["During the installation of DocumentFactory, the ",(0,i.jsx)(n.em,{children:"nk"})," executable\u2014a command-line utility provided by the NATS ecosystem\u2014is\nunpacked into the Installation Location specified in the ",(0,i.jsx)(n.strong,{children:"Select the Installation Location"})," step of the setup process."]}),"\n",(0,i.jsx)(a.A,{src:"external/external_win_nk.png",alt:"Installation Data Location",maxWidth:"600px"}),"\n",(0,i.jsx)(n.p,{children:"To generate a new pair of NATS keys, open a terminal in the installation directory and run the following command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-console",children:"nk -gen user -pubout\n"})}),"\n",(0,i.jsx)(n.p,{children:"This will generate two keys:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"A public key (e.g., UAXXXXXXXX)"}),"\n",(0,i.jsx)(n.li,{children:"A private key (e.g., SAXXXXXXXX)"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"usage-in-dfclientenv",children:"Usage in dfclient.env"}),"\n",(0,i.jsx)(n.p,{children:"The generated keys should be added to the dfclient.env configuration file as follows:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-env",metastring:'title="dfclient.env"',children:"NATS_PUBLICKEY=UAXXXXXXXX\nNATS_PRIVATEKEY=SAXXXXXXXX\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"Replace the above values with the actual keys"})}),"\n",(0,i.jsx)(n.h3,{id:"registering-the-key-in-the-nats-server-config",children:"Registering the Key in the NATS Server Config"}),"\n",(0,i.jsx)(n.p,{children:"To authorize the client, the public key must also be registered in the NATS server config."}),"\n",(0,i.jsx)(n.p,{children:"This step ensures that the server recognizes and accepts incoming connections signed with the corresponding private key."}),"\n",(0,i.jsxs)(n.p,{children:["The NATS server configuration file is typically named ",(0,i.jsx)(n.code,{children:"nats.conf"})," and is located in the same directory as the\nnats-server executable \u2014 that is, in the Installation Location specified during the DocumentFactory setup."]}),"\n",(0,i.jsx)(n.p,{children:"Add the generated public key to the list of authorized keys. For example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-hcl",metastring:'title="nats.conf"',children:"authorization: {\n   users: [\n    { nkey: UAXXXXXXXX }\n   ]\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"After saving the configuration file, restart the NATS server for the changes to take effect."})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},530:(e,n,t)=>{t.d(n,{A:()=>a});t(6540);var i=t(6025),s=t(4848);function a(e){let{src:n,alt:t,width:a="100%",maxWidth:o="600px"}=e;return(0,s.jsx)("img",{src:(0,i.Ay)(`/img/${n}`),alt:t,style:{display:"block",margin:"auto",width:a,maxWidth:o}})}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var i=t(6540);const s={},a=i.createContext(s);function o(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);